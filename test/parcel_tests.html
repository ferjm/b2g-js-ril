<html>
<head>
<script type="text/javascript" src="../js/struct.js"></script>
<script type="text/javascript">

function AssertException(message) { this.message = message; }
AssertException.prototype.toString = function () {
  return 'AssertException: ' + this.message;
}

function assert(exp, message) {
  if (!exp) {
    throw new AssertException(message);
  }
}

function ParcelTest() { 
  this.p = new Parcel();
  assert(typeof this.p == "object", "Parcel not successfully created");
}
with({parcelTest: ParcelTest.prototype}) {
  
  parcelTest.writeInt = function(i) {
    this.p.writeInt(i);
    document.getElementById('parcel').value = this.p.toString();    
  }

  parcelTest.dataLeft = function(expected) {
    var dataleft = this.p.dataLeft();
    assert(dataleft == expected, "dataleft returned an unexpected result");
    alert(dataleft);
  }

  parcelTest.readInt = function() {
    alert(this.p.readInt());
  }

}

var test = new ParcelTest();
</script>
</head>
<body>

<h1>Parcel tests</h1>
<input type="text" id="int" value="0">
<button type="button" onclick="test.writeInt(document.getElementById('int').value)">Write Int</button>
<button type="button" onclick="test.readInt()">Read int</button>
<br><input type="text" id="parcel" size="100">
</body>
</html> 
